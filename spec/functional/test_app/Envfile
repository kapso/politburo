environment(name: 'simple', description: "Simple integration test environment", flavour: :simple) do
  node(name: "node") {}
  node(name: "another node") do
    depends_on node(name: "node").state(:configured)
  end
  node(name: "yet another node", user: 'redbeard', host: 'localhost') do
    state('configured') {
      depends_on node(name: "node")
      remote_task(
        command: 'sudo sh -c "`curl https://babushka.me/up`"', 
        met_test_command: 'bash -l -c "which babushka"') { }
    }
  end
end
